export const base64Mime = (encoded) => {
  let result = null;

  if (typeof encoded !== "string") {
    return result;
  }

  let mime = encoded.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);

  if (mime && mime.length) {
    result = mime[1];
  }

  return result;
};

export const dataURLtoFile = (dataurl, filename) => {
  let arr = dataurl.split(","),
    mime = arr[0].match(/:(.*?);/)[1],
    bstr = atob(arr[1]),
    n = bstr.length,
    u8arr = new Uint8Array(n);

  while (n--) {
    u8arr[n] = bstr.charCodeAt(n);
  }

  return new File([u8arr], filename, { type: mime });
};

export const extractSongTitle = (url) => {
  try {
    let song = url
      .slice(url.lastIndexOf("/") + 1, url.lastIndexOf("."))
      .replace("+", " ");
    return song.replace(/\W\d*/g, " ");
  } catch(err) {
    console.log(err);
  }
};
